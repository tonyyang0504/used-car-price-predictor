{% extends "base.html" %}
{% block content %}
<div class="title-section">
    <h1>Predict Your Car's Value</h1>
    <p>Get accurate predictions using our advanced AI model</p>
</div>

<div class="content-area">
    <div id="value-your-car-section">
        <form id="prediction-form" action="/value-your-car" method="POST">
            <div class="filter-row">
                <div class="form-group">
                    <label for="make">Make:</label>
                    <select id="make" name="Make" required>
                        <option value="">Select Make</option>
                        {% for make in options['Make'] %}
                            <option value="{{ make }}">{{ make }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="model">Model:</label>
                    <select id="model" name="Model" required>
                        <option value="">Select Model</option>
                    </select>
                </div>
            </div>
            <div class="filter-row">
                <div class="form-group">
                    <label for="year">Year:</label>
                    <select id="year" name="Year" required>
                        <option value="">Select Year</option>
                        {% for year in year_range %}
                            <option value="{{ year }}">{{ year }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="kilometers">Kilometers:</label>
                    <input type="number" id="kilometers" name="Kilometers" required>
                </div>
            </div>
            <div class="filter-row">
                <div class="form-group">
                    <label for="regional-specs">Regional Specs:</label>
                    <select id="regional-specs" name="Regional Specs" required>
                        <option value="">Select Regional Specs</option>
                        {% for spec in options['Regional Specs'] %}
                            <option value="{{ spec }}">{{ spec }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="trim">Trim:</label>
                    <select id="trim" name="Trim" required>
                        <option value="">Select Trim</option>
                        <option value="Unknown">Unknown</option>
                        {% for trim in options['Trim'] %}
                            <option value="{{ trim }}">{{ trim }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="filter-row align-items-end">
                <div class="form-group button-group">
                    <button type="submit" id="estimate-value-btn" class="button primary">Estimate Value</button>
                    <button type="reset" id="clear-form-btn" class="button secondary">Clear</button>
                </div>
            </div>
        </form>

        <div id="loading" style="display: none;">Processing...</div>
        <div id="errorMessage"></div>

        <div class="results-container">
            <div id="prediction" style="display: none;">
                <h3>Predicted Price</h3>
                <p id="predicted-price"></p>
            </div>
            <div id="trimPredictions" class="trim-predictions-section" style="display: none;"></div>
            <div id="carInfo" style="display: none;">
                <h3>Car Information</h3>
                <div id="carInfoContent"></div>
            </div>
            <div id="similarCars" class="similar-cars-container" style="display: none;"></div>
            <div id="soldOutCars" class="similar-cars-container" style="display: none;"></div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const options = {{ options|tojson|safe }};
    const filtering_rules = {{ filtering_rules|safe }};
</script>
<script src="{{ url_for('static', filename='js/value_your_car.js') }}"></script>
{% endblock %}